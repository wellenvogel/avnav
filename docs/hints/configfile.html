<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>AvNav Config File</title>
    <link href="../styles.css" rel="stylesheet" type="text/css">
  </head>
  <body data-order="6600">
    <h1>AvNav Server Konfiguration</h1>
    <p>== nicht für <a href="../android/android.html#Settings">Android</a> ==</p>
    <h2>Einführung</h2>
    <p>Der AvNav server liest beim Start seine Konfiguration aus einer xml Datei
      - avnav_server.xml.<br>
      Diese Datei befindet sich normalerweise unter /home/pi/avnav/data auf dem
      Raspberry, sonst unter $HOME/avnav - siehe <a href="../install.html">Installation</a>.</p>
    <p>Wenn diese Datei beim ersten Start noch nicht existiert, wird sie aus
      einem Template erzeugt - passend für den <a href="https://github.com/wellenvogel/avnav/blob/master/raspberry/avnav_server.xml">Raspberry</a>
      oder <a href="https://github.com/wellenvogel/avnav/blob/master/linux/avnav_template.xml">andere
        Systeme</a>.<br>
      Dieses Template ist auf dem Raspberry Pi (mit dem Paket avnav-raspi)&nbsp;
      die Datei /etc/avnav_server.xml (ab 20230426). Wenn diese nicht existiert,
      wird eine Datei aus dem Paket als Template genutzt.<br>
      Falls AvNav von der Kommandozeile über das Kommando "avnav" gestartet
      wird, kann mit der Option -t ein Template angegeben werden.</p>
    <p>Bei Updates der AvNav Software wird diese Datei im Allgemeinen nicht
      geändert. Es kann aber sein, dass für neue Funktionen neue Einträge nötig
      werden. Dann wird in den <a href="../release.html">Release Notes</a>
      darauf hingewiesen.</p>
    <p>Mit jedem erfolgreichen Start (ab Version 20200325) schreibt AvNav eine
      Kopie diese Datei mit der Endung .ok. Falls beim nächsten Start das Parsen
      der xml Datei fehlschlägt, liest er stattdessen die .ok Datei. Diese
      Funktion soll verhindern, dass nach einer Änderung, die AvNav in manchen
      Situation selbst vornimmt, der nächste Start ggf. scheitert.</p>
    <p>Wenn AvNav nicht mehr starten kann wegen Fehler in der Konfiguration,
      kann man die avnav_server.xml komplett entfernen und danach noch einmal
      starten. AvNav startet dann wieder von einem "sauberen" Template.</p>
    <p>Beginnend ab Version 20210322 <b>es ist nicht mehr nötig, die Datei "per
        Hand" zu bearbeiten</b>. Stattdessen sollte AvNav selbst (<a href="../userdoc/statuspage.html">Server/Status
        Seite</a>) für die Bearbeitung der meisten Parameter genutzt werden. Das
      vermeidet auch die Notwendigkeit eines Restarts nach Änderungen.<br>
      In den folgenden Beschreibungen wird in der Spalte "online" angezeigt, ob
      die Parameter direkt auf der Server/Status Seite geändert werden können.<br>
    </p>
    <p>Wenn Parameter geändert werden müssen, die nicht direkt bearbeitbar sind,
      sollte das <a href="https://github.com/wellenvogel/avnav-update-plugin">avnav-update-plugin</a>
      genutzt werden, um die Datei direkt im Browser zu bearbeiten.<br>
      Die Hinweise hier darunter sind also nur noch eine Zusatzinformation.</p>
    <p>Wenn man Änderungen an der Konfiguration vornimmt, muss AvNav danach neu
      gestartet werden (das gilt aber nicht für Änderungen, die direkt auf der
      Server/Status Seite vorgenommen wurden). Wenn AvNav als Systemdienst
      läuft, macht man das mit dem Kommando</p>
    <div class="code">sudo systemctl restart avnav
    </div>
    <p> </p>
    <p>Es empfiehlt sich jedoch, nach einer Änderung AvNav zunächst einmal nur
      von der Kommandozeile zu starten, um zu sehen, ob es schwerwiegende Fehler
      gibt. Die Kommandofolge ist dann</p>
    <div class="code">sudo systemctl stop avnav<br>avnav -e<br>^C<br>sudo systemctl start avnav</div>
    <p> Die option -e gilt erst ab Version 20200325. Sie verhindert, dass im
      Fehlerfall die avnav_server.xml.ok geladen wird. ^C bricht das laufende
      AvNav wieder ab.</p>
    <h2>Inhalt</h2>
    <p>Innerhalb der avnav_server.xml sind Einträge für die einzelnen
      Bestandteile von AvNav enthalten. In den Templates sind bereits viele
      kommentierte Beispiele für entsprechende Einstellungen.</p>
    <p>Grundsätzlich gibt es 3 Kategorien von solchen Bestandteilen:</p>
    <ol>
      <li>Anteile, die nur genau einmal auftreten dürfen, die aber unbedingt in
        der avnav_server.xml stehen müssen<br>
        Beispiele: AVNConfig, AVNHttpServer,...</li>
      <li>Anteile, die im Normalfall nicht in der avnav_config.xml stehen
        müssen, nur wenn etwas Spezielles konfiguriert werden soll<br>
        Beispiele: AVNAlarmHandler, AVNChartHandler,...</li>
      <li>Anteile, die ein- oder mehrfach in der avnav_server.xml stehen können.
        Das sind insbesondere die Eingangs- und Ausgangskanäle. Wenn kein
        solcher Eintrag vorhanden ist, steht die Funktion nicht zur Verfügung.</li>
    </ol>
    <p>Es gibt einige Eigenschaften, die an mehreren Bestandteilen auftauchen,
      für diese hier eine Erklärung.</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>Beispiel</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>Viele Handler können auf der Server/Status Seite mit diesem
            Parameter ein- bzw. ausgeschaltet werdem</td>
          <td>ein</td>
        </tr>
        <tr>
          <td>name</td>
          <td>Name eines Input oder Output Kanals. Dieser wird auf der
            Status-Seite angezeigt und kann auch im Parameter <a href="#blackList">blackList</a>
            für Filterungen genutzt werden</td>
          <td>nmea0183tosignalk</td>
        </tr>
        <tr>
          <td><a name="filter" id="filter"></a>filter</td>
          <td>Filterung von NMEA Daten. hier können durch Komma getrennte Filter
            angegeben werden, die bestimmen, welche NMEA Daten durchgelassen
            werden. Um sie unabhängig von Talker Ids zu machen, werden die 2
            Zeichen nach einem $ nicht berücksichtigt. Ein Filter für $GPRMC
            sieht dann so aus: $RMC.<br>
            Wenn dem Filter ein ^ vorangestellt wird, wird er negiert, also
            ^$RMC heisst: keine RMC records. AIS Daten kann man mit dem Filter
            "!" oder "!AIVDM" matchen.</td>
          <td>$RMC,^$RMB,!AIVDM</td>
        </tr>
        <tr>
          <td>readFilter</td>
          <td>Für kombinierte Reader/Writer ein Filter für die Eingangsseite.
            Siehe <a href="#filter">filter</a></td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td><a name="blackList" id="blackList"></a>blackList</td>
          <td>Liste von Kanal-Namen, deren Daten nicht ausgesendet werden
            sollen. Schreibweise beachten (grosses L)</td>
          <td>nmea0183tosignalk</td>
        </tr>
        <tr>
          <td>priority<br>
            (since 20220421)</td>
          <td>Alle NMEA Input Kanäle haben ein priority Feld. Dieses
            beeinflusst, welcher Wert gewinnt, wenn die gleichen Werte von
            mehreren Kanälen dekodiert werden. Die default priority ist 50, sie
            kann nach oben und unten geändert werden. Die SignalK Integration
            hat die default Priority 40.</td>
          <td>50</td>
        </tr>
      </tbody>
    </table>
    <p><br>
    </p>
    <p>Im Folgenden sind die wichtigsten Bestandteile mit ihren Parametern
      aufgeführt. Falls Parameter hier nicht beschrieben sind, aber ggf. in
      einem Template auftauchen, sollte sie so belassen werden, wie sie dort
      sind.<br>
    </p>
    <h3>AVNConfig</h3>
    <p>Basis Konfiguration und Systemzeit, Kategorie 1 (1x,nötig)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td style="width: 162px;">settimecmd</td>
          <td><br>
          </td>
          <td>Ein Kommando, das aufgerufen wird, um die Systemzeit zu setzen.
            Der Parameter ist ein Zeitstempel in UTC so wie er für date -u
            benötigt wird.</td>
          <td>nur gesetzt mit dem avnav-raspi Paket</td>
        </tr>
        <tr>
          <td>settime<br>
            (ab 203304xx)</td>
          <td>X</td>
          <td>Wen ein, setze die Systemzeit (settimecmd muss ebenfalls gesetzt
            sein)</td>
          <td>ein</td>
        </tr>
        <tr>
          <td>maxtimeback</td>
          <td>X</td>
          <td>maximale Zeit, die die Systemzeit rückwärts gesetzt wird, bevor
            alle internen Daten gelöscht werden (s)</td>
          <td>5</td>
        </tr>
        <tr>
          <td>systimediff</td>
          <td>X</td>
          <td>maximale Zeitabweichung der Systemzeit von der gps-Zeit bevor die
            Systemzeit neu gesetzt wird (s)</td>
          <td>5</td>
        </tr>
        <tr>
          <td>settimeperiod</td>
          <td>X</td>
          <td>Zeit in s bevor die Systemzeit erneut gesetzt wird</td>
          <td>3600</td>
        </tr>
        <tr>
          <td>ntphost<br>
            (ab 20220421)</td>
          <td>X</td>
          <td>Ein ntp server. Dieser wird befragt, wenn keine gültige GPS Zeit
            vorhanden ist und settime aktiv ist</td>
          <td>pool.ntp.org</td>
        </tr>
        <tr>
          <td>switchtime<br>
            (ab 20220421)</td>
          <td>X</td>
          <td>Zeit(in s) die nach dem Setzen der Zeit mindestens gewartet wird,
            bevor von gps zu ntp oder zurück gewechselt wird. Diese Zeit wird
            auch nach dem Start auf eine gültige GPS Zeit gewartet wird</td>
          <td>60</td>
        </tr>
        <tr>
          <td>ownMMSI</td>
          <td>X</td>
          <td>MMSI des eigenen Bootes, diese wird aus den AIS Daten ausgefiltert</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>expiryTime</td>
          <td>X</td>
          <td>Zeit (in s) die empfangene NMEA Daten gültig bleiben</td>
          <td>30</td>
        </tr>
        <tr>
          <td>aisExpiryTime</td>
          <td>X</td>
          <td>Zeit (in s) die empfangene AIS Daten gültig bleiben</td>
          <td>1200</td>
        </tr>
      </tbody>
    </table>
    <h3>AVNFeeder</h3>
    <p>Die interne NMEA Liste und Dekodier-Einheit. Kategorie 2 (1x, nicht nötig
      ab Version 20200325).</p>
    <p>Diese Einheit hat keine Parameter mehr. In früheren Versionen wurde hier
      der gpsd für die Dekodierung genutzt, daher sind u.U. noch Parameter zu
      finden, die sich darauf beziehen. In neueren Versionen sollte der Eintrag
      so geändert werden, dass useGpsd="false" enthalten ist.</p>
    <h3>AVNHttpServer</h3>
    <p>Der interne HTTP server. Kategorie 1 (einmal, erforderlich).</p>
    <p>Neben den Parametern für AVNHttpServer gibt es einige Unter-Einträge, die
      sich mehrfach wiederholen können. Im Normalfall sollten hier aber keine
      Änderungen nötig sein (Directory,MimeType).</p>
    <p>Ausser dem httpPort sollten normalerweise keine Änderungen erforderlich
      sein.</p>
    <h4>Parameter für AVNHttpServer</h4>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>httpPort</td>
          <td>der Port, auf dem der HTTP Server Anfragen annimmt</td>
          <td>8080</td>
        </tr>
        <tr>
          <td>navurl</td>
          <td>REST interface, nicht änderbar</td>
          <td>/viewer/avnav_navi.php</td>
        </tr>
        <tr>
          <td>index</td>
          <td>Startseite, nicht änderbar</td>
          <td>/viewer/avnav_viewer.html</td>
        </tr>
        <tr>
          <td>httpHost</td>
          <td>Die Bind Adresse, man kann hier z.B. auf ein bestimmtes Netzwerk
            beschränken</td>
          <td>0.0.0.0</td>
        </tr>
        <tr>
          <td>numThreads</td>
          <td>Die Zahl der vom Server genutzten Threads</td>
          <td>5</td>
        </tr>
      </tbody>
    </table>
    <h4>Parameter für Directory</h4>
    <p>Diese Werte werden meist durch den Aufruf (Parameter -u bei avnav)
      überschrieben und sollten nicht geändert werden.</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>urlpath</td>
          <td>die URL (ohne /)</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>path</td>
          <td>der reale Pfad auf dem System</td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h4>Parameter für MimeType</h4>
    <p>Hier werden mime types für Dateinamensendungen konfiguriert. Falls eine
      eigene Anwendung hier ggf. etwas spezielles benötigt, kann man das
      ergänzen.</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>extension</td>
          <td>Namens-Endung (z.B. .avt)</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>type</td>
          <td>Mime type (z.B. text/plain)</td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <p><br>
    </p>
    <h3>AVNBlueToothReader</h3>
    <p>Lesen von Bluetooth Geräten mit seriellem Profil. Kategorie 3 (einmal
      möglich, optional)<br>
      Nur möglich, wenn das Gerät ein Bluetooth Device hat.</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>maxDevices</td>
          <td>X</td>
          <td>Anzahl der maximal gleichzeitig verbundenen Bluetooth Geräte</td>
          <td>5</td>
        </tr>
        <tr>
          <td>deviceList</td>
          <td>X</td>
          <td>Komma-separierte Liste von Bluetooth Geräte-Ids. Wenn gesetzt,
            werden nur diese Geräte verbunden.</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>filter</td>
          <td>X</td>
          <td><a href="#filter">filter</a> für NMEA Daten</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>priority</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3><a name="AVNSerialReader" id="AVNSerialReader"></a>AVNSerialReader</h3>
    <p>Lesen von seriellen Geräten. Kategorie 3 (mehrfach, optional). Dieser
      Reader sollte nur für direkt per Hardware (UART) verbundene Geräte genutzt
      werden, für Geräte, die per USB angeschlossen sind ist der <a href="#AVNUsbSerialReader">AVNUsbSerialReader</a>
      zuständig.</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>Kanal Name für die Nutzung in blackList und für die Anzeige</td>
          <td>intern gebildeter Name</td>
        </tr>
        <tr>
          <td>port</td>
          <td>X</td>
          <td>Gerätename, z.B. /dev/ttyAMA0</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>baud</td>
          <td>X</td>
          <td>Baudrate. Wenn minBaud auch angegeben ist, die maximale Baudrate,
            die für das automatische Feststellen der Baudrate genutzt wird</td>
          <td>4800</td>
        </tr>
        <tr>
          <td>minbaud</td>
          <td>X</td>
          <td>Minimale Baudrate, die für eine automatische Erkenung genutzt
            wird. Wenn nicht gesetzt oder 0 - automatische Erkennung aus</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>timeout</td>
          <td>X</td>
          <td>Timeout in s, nach dem das Gerät ohne Daten geschlossen und wieder
            geöffnet wird</td>
          <td>1</td>
        </tr>
        <tr>
          <td>bytesize</td>
          <td>X</td>
          <td>serielle Byte Größe</td>
          <td>8</td>
        </tr>
        <tr>
          <td>parity</td>
          <td>X</td>
          <td>Parity</td>
          <td>N</td>
        </tr>
        <tr>
          <td>stopbits</td>
          <td>X</td>
          <td>Anzahl der Stopbits</td>
          <td>1</td>
        </tr>
        <tr>
          <td>xonxoff</td>
          <td>X</td>
          <td>Nutzung xon/xoff Protokoll (0: aus)</td>
          <td>0</td>
        </tr>
        <tr>
          <td>rtscts</td>
          <td>X</td>
          <td>RTS/CTS Nutzung (0: aus)</td>
          <td>0</td>
        </tr>
        <tr>
          <td>numerrors</td>
          <td>X</td>
          <td>Anzahl der Fehler, nach der das Gerät geschlossen und neu geöffnet
            wird.</td>
          <td>20</td>
        </tr>
        <tr>
          <td>autobaudtime</td>
          <td>X</td>
          <td>Zeit in s, die versucht wird, ein Newline in den Daten zu erkennen
            (während der automatischen Baudraten-Erkennung)</td>
          <td>5</td>
        </tr>
        <tr>
          <td>filter</td>
          <td>X</td>
          <td>NMEA Filter, siehe <a href="#filter">filter</a></td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>priority</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3><a name="AVNSerialWriter" id="AVNSerialWriter"></a>AVNSerialWriter</h3>
    <p>Ausgang über ein serielles Gerät. Auch kombiniert Ein- und Ausgang.
      Kategorie 3 (optional)<br>
      Nur für direkte serielle Geräte, nicht für USB-Wandler (<a href="#AVNUsbSerialReader">AVNUsbSerialReader</a>
      für diese)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>channel name</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>combined</td>
          <td>X</td>
          <td>wenn "true", dann gleichzeitig Eingang und Ausgang</td>
          <td>false</td>
        </tr>
        <tr>
          <td>readFilter</td>
          <td>X</td>
          <td><a href="#filter">filter</a> für die Eingangsrichtung. Der
            Parameter "filter" bezieht sich auf die Ausgangsrichtung!</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>blackList</td>
          <td>X</td>
          <td><a href="#blackList">blackList</a>, Komma getrennte Liste von
            Kanalnamen, deren Daten nicht ausgegeben werden sollen.</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>....</td>
          <td><br>
          </td>
          <td>alle Parameter von <a href="#AVNSerialReader">AVNSerialReader</a></td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <a name="AVNUsbSerialReader"></a>
    <h3>AVNUsbSerialReader</h3>
    <p>Behandelt über USB angeschlossene serielle Geräte. Kategorie 3(einmal,
      optional).<br>
      Dieser Worker sucht alle über USB verbundenen Geräte. Solche mit einem
      seriellen Profil versucht er zu öffnen, automatische die Baudrate
      einzustellen und dann NMEA Daten zu lesen. Damit werden solche Geräte
      normalerweise komplett automatisch von AvNav erkannt.<br>
      Man kann für einzelne Geräte Regeln definieren, um sie speziell zu
      behandeln. Als Identifikation für ein Gerät wird dabei eine ID genutzt,
      die die enstprechende USB Buchse identifiziert. Mann kann diese ID am
      einfachsten ermitteln, indem man bei Einstecken des Gerätes die <a href="../userdoc/statuspage.html">Status
        Seite</a> beobachtet.</p>
    <p>Die Parameter gliedern sich in 2 Teile: </p>
    <ul>
      <li>Attribute für den Eintrag selbst</li>
      <li>Darunter liegende Einträge des Types UsbDevice</li>
    </ul>
    <p>Beispiel</p>
    <div class="code">&lt;AVNUsbSerialReader maxDevices="5" allowUnknown="true" baud="38400" minbaud="4800"&gt;
	&lt;UsbDevice usbid="1-1.2.1:1.0" baud="38400" minbaud="4800" filter="$RMC"/&gt;<br>&lt;/AVNUsbSerialReader&gt;</div>
    <h4>Parameter für AVNUsbSerialReader</h4>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>maxDevices</td>
          <td>X</td>
          <td>maximale Zahl von gleichzeitig verbundenen USB Geräten</td>
          <td>5</td>
        </tr>
        <tr>
          <td>allowUnknown</td>
          <td>X</td>
          <td>nur wenn dieser Eintrag auf "true" steht, werden Geräte
            eingebunden, die nicht explizit mit UsbDevice konfiguriert sind</td>
          <td>true</td>
        </tr>
        <tr>
          <td>...</td>
          <td>X</td>
          <td>alle Parameter von <a href="#AVNSerialReader">AVNSerialReader</a>
            bis auf port. Diese werden für nicht explizit konfigurierte Geräte
            gesetzt.</td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h4>Parameter für UsbDevice</h4>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>usbid</td>
          <td>X</td>
          <td>USB Port identifikation z.B. "1-1.2.1:1.0", erforderlich</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>type</td>
          <td>X</td>
          <td>Type des Gerätes reader, writer, combined, ignore, setze ignore,
            wenn das Gerät nicht genutzt werden soll</td>
          <td>reader</td>
        </tr>
        <tr>
          <td>...</td>
          <td><br>
          </td>
          <td>alle Parameter von <a href="#AVNSerialReader">AVNSerialReader</a>
            wenn der type = "reader" ist (bis auf port, dieser wird intern
            gesetzt)</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>...</td>
          <td><br>
          </td>
          <td>alle Parameter von <a href="#AVNSerialWriter">AVNSerialWriter</a>wenn
            der type combined oder writer ist (bis auf port, dieser wird intern
            gesetzt)</td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>AVNUdpReader<br>
    </h3>
    <p>Öffnet einen UPD port und verarbeitet dort hereinkommende Daten.
      Kategorie 3(optional, mehrfach).</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>Kanalname für die Nutzung in <a href="#blackList">blackList</a>
            und in der Anzeige</td>
          <td>intern berechnet</td>
        </tr>
        <tr>
          <td>port</td>
          <td>X</td>
          <td>UDP port</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>host</td>
          <td>X</td>
          <td>Bind Adresse für den Port. Damit kann der Empfang z.B. auf
            localhost begrenzt werden.</td>
          <td>0.0.0.0</td>
        </tr>
        <tr>
          <td>minTime</td>
          <td>X</td>
          <td>wenn gesetzt: Wartezeit in s bevor ein weiterer Datensatz
            empfangen wird. Hiermit kann u.U. die Datenrate begrenzt werden.</td>
          <td>0</td>
        </tr>
        <tr>
          <td>filter</td>
          <td>X</td>
          <td><a href="#filter">filter</a> für NMEA Daten</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>priority</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>stripLeading</td>
          <td>X</td>
          <td>Entferne alle Zeichen vor $ oder ! in einer Zeile. </td>
          <td>aus</td>
        </tr>
      </tbody>
    </table>
    <h3>AVNUdpWriter</h3>
    <p>Sendet NMEA Daten per UDP. Kategorie 3 (optional, mehrfach)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>Kanalname</td>
          <td>intern berechnet</td>
        </tr>
        <tr>
          <td>port</td>
          <td>X</td>
          <td>UDP Ziel port</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>host</td>
          <td>X</td>
          <td>UDP Zieladresse</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>filter</td>
          <td>X</td>
          <td><a href="#filter">filter</a> NMEA Daten, die gesendet werden</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>broadcast</td>
          <td>X</td>
          <td>muss auf true gesetzt werden, wenn die Daten als broadcast
            geschickt werden sollen</td>
          <td>false</td>
        </tr>
        <tr>
          <td>blackList</td>
          <td>X</td>
          <td><a href="#blackList">blackList</a> für Kanalnamen, deren Daten
            nicht gesendet werden sollen</td>
          <td> <br>
          </td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>AVNSocketWriter</h3>
    <p>Ein Ausgang, der auf einem Port auf Verbindungen wartet und an diese die
      NMEA Daten ausgibt (TCP server). Kategorie 3 (mehrfach, optional).</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>Kanalname</td>
          <td>intern berechnet</td>
        </tr>
        <tr>
          <td>port</td>
          <td>X</td>
          <td>der Listener Port</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>address</td>
          <td>X</td>
          <td>wenn gesetzt, binde auf diese Adresse (sonst any: 0.0.0.0)</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>filter</td>
          <td>X</td>
          <td><a href="#filter">filter</a> für NMEA Daten</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>read</td>
          <td>X</td>
          <td>wenn true, werden auch Daten vom Socket gelesen</td>
          <td>false</td>
        </tr>
        <tr>
          <td>priority</td>
          <td>X</td>
          <td>nur wenn read aktiv ist</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>readFilter</td>
          <td>X</td>
          <td>falls auch gelesen wird, NMEA <a href="#filter">filter</a> für
            die Eingangsrichtung</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>blackList</td>
          <td>X</td>
          <td><a href="#blackList">blackList</a> durch Komma getrennte Liste von
            Kanalnamen, für die keine Daten ausgegeben werden</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>minTime</td>
          <td>X</td>
          <td>minimale Zeit in s zwischen 2 gesendeten Nachrichten. Damit kann
            die Datenrate begrenzt werden.</td>
          <td>0</td>
        </tr>
        <tr>
          <td>avahiEnabled</td>
          <td>X</td>
          <td>wenn eingeschaltet, wird der Service über avahi als
            _nmea-0183._tcp bekannt gemacht</td>
          <td>aus</td>
        </tr>
        <tr>
          <td>avahiName</td>
          <td>X</td>
          <td>der Name für den avahi service</td>
          <td>avnav-server</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>AVNSocketReader</h3>
    <p>Ein Eingang, der sich mit einem TCP Server verbindet und von dort Daten
      liest (TCP client). Kategorie 3 (mehrfach, optional)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>Kanalname</td>
          <td>intern berechnet</td>
        </tr>
        <tr>
          <td>port</td>
          <td>X</td>
          <td>TCP Port zu dem eine Verbindung aufgebaut wird</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>host</td>
          <td>X</td>
          <td>TCP Zieladresse zu der eine Verbindung aufgebaut wird</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>timeout</td>
          <td>X</td>
          <td>Verbindungs-timeout in s</td>
          <td>10</td>
        </tr>
        <tr>
          <td>minTime</td>
          <td>X</td>
          <td>Minimale Zeit zwischen 2 empfangenen Nachrichten</td>
          <td>0</td>
        </tr>
        <tr>
          <td>filter</td>
          <td>X</td>
          <td><a href="#filter">filter</a> für NMEA Daten</td>
          <td>leer<br>
          </td>
        </tr>
        <tr>
          <td>writeOut</td>
          <td>X</td>
          <td>sende NMEA Daten auf dieser Verbindung</td>
          <td>aus</td>
        </tr>
        <tr>
          <td>writeFilter</td>
          <td>X</td>
          <td><a href="#filter">Filter</a> für gesendete NMEA Daten</td>
          <td>leer</td>
        </tr>
        <tr>
          <td>blackList</td>
          <td>X</td>
          <td>, separierte Liste von Source-Namen, deren Daten nicht gesendet
            werden</td>
          <td>leer</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>priority</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>stripLeading</td>
          <td>X</td>
          <td>Entferne alle Zeichen vor $ oder ! in einer Zeile. </td>
          <td>aus</td>
        </tr>
      </tbody>
    </table>
    <h3>AVNNmea0183ServiceReader</h3>
    <p>Dieser handler ist dem AVNSocketReader sehr ähnlich. Aber anstelle der
      Konfiguration von host und port wird hier der Name des Services
      konfiguriert. AvNav sucht im Netz nach (MDNS/Bonjour/Avahi) Services vom
      Typ_nmea-0183._tcp . Wenn der Eintrag über die Web Oberfläche erfolgt,
      bietet AvNav die Liste der gefundenen Services zur Auswahl an. MIt diesem
      Handler kann eine Verbindung auch dann wieder aufgebaut werden, wenn sich
      z.B. die IP Adressen ändern.</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Description</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>serviceName</td>
          <td>X</td>
          <td>Der Name des Services (AvNav bietet eine Liste)</td>
          <td>--</td>
        </tr>
        <tr>
          <td>timeout</td>
          <td>X</td>
          <td>Verbindungstimeout in Sekunden</td>
          <td>10</td>
        </tr>
        <tr>
          <td>minTime</td>
          <td>X</td>
          <td>minimale Zeit zwischen 2 empfangenen Nachrichten.</td>
          <td>0</td>
        </tr>
        <tr>
          <td>filter</td>
          <td>X</td>
          <td><a href="#filter">Filter</a> für NMEA Daten</td>
          <td>leer</td>
        </tr>
        <tr>
          <td>writeOut</td>
          <td>X</td>
          <td>sende NMEA Daten auf dieser Verbindung</td>
          <td>aus</td>
        </tr>
        <tr>
          <td>writeFilter</td>
          <td>X</td>
          <td><a href="#filter">Filter</a> für gesendete NMEA Daten</td>
          <td>leer</td>
        </tr>
        <tr>
          <td>blackList</td>
          <td>X</td>
          <td>, separierte Liste von Source-Namen, deren Daten nicht gesendet
            werden</td>
          <td>leer</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>priority</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <p> </p>
    <h3>AVNBME280Reader</h3>
    <p>Reader für BME280 per I2C. Kategorie 3 (optional)<br>
      Schreibt MDA und XDR Datensätze.<br>
      Nur sichtbar, wenn python3-smbus installiert ist.</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>Kanalname</td>
          <td>intern berechnet</td>
        </tr>
        <tr>
          <td>addr</td>
          <td>X</td>
          <td>I2C Adresse des Sensors</td>
          <td>0x77</td>
        </tr>
        <tr>
          <td>interval</td>
          <td>X</td>
          <td>Zeit zwischen 2 NMEA Datensätzen in s</td>
          <td>5</td>
        </tr>
        <tr>
          <td>writeXdr</td>
          <td>X</td>
          <td>Schreibe XDR wenn true</td>
          <td>true</td>
        </tr>
        <tr>
          <td>writeMda</td>
          <td>X</td>
          <td>Schreibe MDA wenn true</td>
          <td>true</td>
        </tr>
        <tr>
          <td>namePress</td>
          <td>X</td>
          <td>XDR Transducer Name für Luftdruck</td>
          <td>Barometer</td>
        </tr>
        <tr>
          <td>nameHumid</td>
          <td>X</td>
          <td>XDR Transducer Name für Feuchtigkeit</td>
          <td>Humidity</td>
        </tr>
        <tr>
          <td>nameTemp</td>
          <td>X</td>
          <td>XDR transducer Name für Temperatur</td>
          <td>TempAir</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>priority</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>AVNBMB180Reader</h3>
    <p>Reader für BMP180 per I2C. Kategorie 3 (optional)<br>
      Schreibt MDA und XDR Datensätze.</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>Kanalname</td>
          <td>intern berechnet</td>
        </tr>
        <tr>
          <td>addr</td>
          <td>X</td>
          <td>I2C Adresse des Sensors</td>
          <td>0x77</td>
        </tr>
        <tr>
          <td>interval</td>
          <td>X</td>
          <td>Zeit zwischen 2 NMEA Datensätzen in s</td>
          <td>5</td>
        </tr>
        <tr>
          <td>writeXdr</td>
          <td>X</td>
          <td>Schreibe XDR wenn true</td>
          <td>true</td>
        </tr>
        <tr>
          <td>writeMda</td>
          <td>X</td>
          <td>Schreibe MDA wenn true</td>
          <td>true</td>
        </tr>
        <tr>
          <td>namePress</td>
          <td>X</td>
          <td>XDR Transducer Name für Luftdruck</td>
          <td>Barometer</td>
        </tr>
        <tr>
          <td>nameTemp</td>
          <td>X</td>
          <td>XDR transducer Name für Temperatur</td>
          <td>TempAir</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>priority</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>AVNSenseHatReader</h3>
    <p>Reader für SenseHat I2C. Kategorie 3 (optional)<br>
      Schreibt MDA und XDR Datensätze.<br>
      Erfordert python3-sense-hat</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>Kanalname</td>
          <td>intern berechnet</td>
        </tr>
        <tr>
          <td>interval</td>
          <td>X</td>
          <td>Zeit zwischen 2 NMEA Datensätzen in s</td>
          <td>5</td>
        </tr>
        <tr>
          <td>writeXdr</td>
          <td>X</td>
          <td>Schreibe XDR wenn true</td>
          <td>true</td>
        </tr>
        <tr>
          <td>writeMda</td>
          <td>X</td>
          <td>Schreibe MDA wenn true</td>
          <td>true</td>
        </tr>
        <tr>
          <td>namePress</td>
          <td>X</td>
          <td>XDR Transducer Name für Luftdruck</td>
          <td>Barometer</td>
        </tr>
        <tr>
          <td>nameHumid</td>
          <td>X</td>
          <td>XDR Transducer Name für Feuchtigkeit</td>
          <td>Humidity</td>
        </tr>
        <tr>
          <td>nameTemp</td>
          <td>X</td>
          <td>XDR transducer Name für Temperatur</td>
          <td>TempAir</td>
        </tr>
        <tr>
          <td>nameRoll<br>
            (ab 20220421)</td>
          <td>X</td>
          <td>XDR transducer Name für Roll</td>
          <td>Roll</td>
        </tr>
        <tr>
          <td>namePitch<br>
            (ab 20220421)</td>
          <td>X</td>
          <td>XDR transducer Name für Pitch</td>
          <td>Pitch</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>priority</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>AVNTrackWriter</h3>
    <p>Schreiben von Tracks im gpx Format und einem simplen ASCII Format.
      Kategorie 3 (einmal, optional)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>interval</td>
          <td>X</td>
          <td>minimaler Abstand in s zwischen dem Schreiben von 2 Einträgen</td>
          <td>10</td>
        </tr>
        <tr>
          <td>mindistance</td>
          <td>X</td>
          <td>minimaler Abstand in m zwischen 2 Track Punkten</td>
          <td>50</td>
        </tr>
        <tr>
          <td>trackdir</td>
          <td>X</td>
          <td>Verzeichnis für tracks</td>
          <td>&lt;datadir&gt;/tracks</td>
        </tr>
        <tr>
          <td>cleanup</td>
          <td>X</td>
          <td>Maximale Länge des intern vorgehaltenen Tracks in Stunden.
            Trackdaten werden weiter in Dateien geschrieben, aber die App kann
            maximal diese Zeit (rückwärts) als Track bekommen.</td>
          <td>25</td>
        </tr>
        <tr>
          <td>writeFile</td>
          <td>X</td>
          <td>Schreibe eine Track Datei. Wenn ausgeschaltet Aufzeichnung nur im
            Speicher.</td>
          <td>ein</td>
        </tr>
      </tbody>
    </table>
    <h3>AVNRouter</h3>
    <p>Verwalten von Routing Daten (Wegpunkte, Routen, Ankeralarm). Berechnung
      der AP Daten. Kategorie 1 (einmal, erforderlich).</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>X</td>
          <td>Kanalname (genutzt für AP Daten)</td>
          <td>intern berechnet</td>
        </tr>
        <tr>
          <td>routesdir</td>
          <td><br>
          </td>
          <td>Verzeichnis für routen</td>
          <td>&lt;datadir&gt;/routes</td>
        </tr>
        <tr>
          <td>interval</td>
          <td>X</td>
          <td>Intervall (in s) zwischen RMB Datensätzen</td>
          <td>5</td>
        </tr>
        <tr>
          <td>computeRMB</td>
          <td>X</td>
          <td>berechne einen RMB Datensatz wenn ein Wegpunkt aktiv ist</td>
          <td>true</td>
        </tr>
        <tr>
          <td>computeAPB</td>
          <td>X</td>
          <td>berechne einen APB Datensatz</td>
          <td>false</td>
        </tr>
        <tr>
          <td>useRhumbLine<br>
            (ab 20220819)</td>
          <td>X</td>
          <td>benutze den <a href="../quickstart.html#routes">rhumb line Modus</a>
            für Routen</td>
          <td>false</td>
        </tr>
        <tr>
          <td>nextWpMode<br>
            (ab 20220819)</td>
          <td>X</td>
          <td>Auswahl des <a href="../quickstart.html#nextwp">Weiterschaltungs-Modus
              für den nächsten Wegepunkt</a> in einer Route (late, 90, early)</td>
          <td>late</td>
        </tr>
        <tr>
          <td>nextWpTime<br>
            (ab 20220819)</td>
          <td>X</td>
          <td>Die Wartezeit nach dem Wegepunktalarm (in Sekunden) bis zur
            Weiterschaltung zum nächsten Wegepunkt (nur nextWpMode = early)</td>
          <td>10</td>
        </tr>
      </tbody>
    </table>
    <h3>AVNNmeaLogger</h3>
    <p>Schreibt NMEA logs in das track Verzeichnis. Kategorie 3 (einmal,
      optional).</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>maxfiles</td>
          <td>X</td>
          <td>Anzahl der Dateien (1 pro Tag), die aufgehoben werden</td>
          <td>100</td>
        </tr>
        <tr>
          <td>filter </td>
          <td>X</td>
          <td><a href="#filter">filter</a> für NMEA Daten</td>
          <td>"$RMC,$DBT,$DBP" </td>
        </tr>
        <tr>
          <td>interval</td>
          <td>X</td>
          <td>Minimale Zeit in s bevor ein Satz des gleichen Typs erneut
            geschrieben wird</td>
          <td>5</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>AVNImporter</h3>
    <p>Importiert Karten, die noch konvertiert werden müssen. Kategorie 2
      (einmal, nicht notwendig)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>importDir</td>
          <td><br>
          </td>
          <td>Verzeichnis aus dem die zu importierenden Karten gelesen werden</td>
          <td>&lt;datadir&gt;/import</td>
        </tr>
        <tr>
          <td>workDir</td>
          <td><br>
          </td>
          <td>Arbeitsverzeichnis für den import</td>
          <td>&lt;datadir&gt;/work</td>
        </tr>
        <tr>
          <td>waittime</td>
          <td>X</td>
          <td>Zeit in s, die nach dem Finden einer Datei im Import-Verzeichnis
            gewartet wird, bevor der Konverter startet</td>
          <td>30</td>
        </tr>
        <tr>
          <td>knownExtensions</td>
          <td>X</td>
          <td>Liste der Dateinamensendungen, die in der App zum Hochladen in den
            Importer angeboten werden</td>
          <td>kap,map,geo</td>
        </tr>
        <tr>
          <td>keepInfoTime</td>
          <td><br>
          </td>
          <td>Zeit in s, die eine Information über einen Import noch stehen
            bleibt</td>
          <td>30</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>AVNWpaHandler</h3>
    <p>Konfiguration von externen WLAN Verbindungen. Kategorie 3 (einmalig,
      optional)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>wpaSocket</td>
          <td>die Steuerverbindung zu wpa_supplicant</td>
          <td>/var/run/wpa_supplicant/wlan-av1</td>
        </tr>
        <tr>
          <td>ownSsid</td>
          <td>eigene SSIDs, diese werden ausgeblendet</td>
          <td>avnav,avnav1,avnav2</td>
        </tr>
        <tr>
          <td>firewallCommand</td>
          <td>wenn konfiguriert, kann damit der externe Zugriff über ein WLAN
            freigeschaltet werden</td>
          <td>sudo -n $BASEDIR/../raspberry/iptables-ext.sh wlan-av1</td>
        </tr>
        <tr>
          <td><br>
          </td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <a name="AVNCommandHandler"></a><h3>AVNCommandHandler</h3>
    <p>Ausführen von Kommandos, u.a. für Alarme. Kategorie 2 (einmalig, nicht
      notwendig).</p>
    <p>Der AVNCommandHandler selbst hat keine Parameter. Es können jedoch
      verschiedene Kommandos konfiguriert werden, die dann jeweils per Name
      angesprochen werden. Die default Konfiguration ist:</p>
    <div class="code">&lt;AVNCommandHandler&gt;
     &lt;Command name="sound" command="mpg123 -q" repeat="1"/&gt;
&lt;/AVNCommandHandler&gt;</div>
    <h4>Parameter für Command</h4>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>name</td>
          <td>Name des Kommandos</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>command</td>
          <td>Auszuführender Befehl</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>repeat</td>
          <td>Zahl der Wiederholungen</td>
          <td>1</td>
        </tr>
      </tbody>
    </table>
    <a name="AVNAlarmHandler"></a>
    <h3>AVNAlarmHandler</h3>
    <p>Management von Alarmen. Kategorie 2 (einmal, nicht notwendig).</p>
    <p>Stark verändert ab 20220421.</p>
    <p>Die default Konfiguration ist:</p>
    <div class="code">&lt;AVNAlarmHandler&gt;
	&lt;Alarm name="waypoint" category="info" repeat="1"/&gt;<br>	&lt;Alarm name="connectionLost" category="info" repeat="1"/&gt;
	&lt;Alarm name="anchor" category="critical" repeat="20000"/&gt;
	&lt;Alarm name="gps"  category="critical" repeat="20000"/&gt;
	&lt;Alarm name="mob" category="critical" repeat="2"/&gt;<br>&lt;/AVNAlarmHandler&gt;
    </div>
    <p>Ab der Version 20220421 sollten vorhandene Alarm-Einträge in
      avnav_server.xml gelöscht werden, falls nicht ein spezielles Kommando dort
      eingetragen werden soll.<br>
      Damit können die Sounds über die Sound Auswahl für die Kategorie definiert
      werden.</p>
    <p>Falls mit Alarmen spezielle Kommandos ausgelöst werden sollen, können
      diese jedoch in der avnav_server.xml explizit gesetzt werden.</p>
    <div class="code">&lt;AVNAlarmHandler&gt;<br>        &lt;!-- legacy way of configuring alarms - still supported but not recommended, use category at least and optionally parameter --&gt;
	&lt;Alarm name="gps" category="critical" command="gpsAlarm" parameter="$BASEDIR/../sounds/anchorAlarm.mp3" repeat="20000"/&gt;<br>        &lt;!-- with the next line we configuer a special command that will be called when we receive a "sinking" notification from SignalK<br>             the sound is determined by the category - and this is also the parameter that the command will receive --&gt;
	&lt;Alarm name="sk:sinking" command="sinkingAlarm" category="critical" repeat="2"/&gt;<br>&lt;/AVNAlarmHandler&gt;
    </div>
    <h4>Parameter für Alarm</h4>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default</td>
        </tr>
        <tr>
          <td>name</td>
          <td>Name des Alarms</td>
          <td>leer, erforderlich</td>
        </tr>
        <tr>
          <td>category</td>
          <td>Kategorie (info,critical)</td>
          <td>leer</td>
        </tr>
        <tr>
          <td>command</td>
          <td>Kommando, das ausgeführt werden soll (muss bei AVNCommandHandler
            konfiguriert sein)</td>
          <td>leer</td>
        </tr>
        <tr>
          <td>autoclean</td>
          <td>Schalte den Alarm ab, wenn das Kommando beendet wurde</td>
          <td>aus</td>
        </tr>
        <tr>
          <td>sound</td>
          <td>Der Name einer Sound Datei - wenn angegeben wird diese genutzt
            (relative Namen beziehen sich auf das interne Sound Verzeichins oder
            auf das user-Verzeichnis).<br>
            Wenn nicht gesetzt, wird der sound aus der Kategorie ermittelt oder
            wenn nicht gesetzt aus dem 'parameter'</td>
          <td>leer</td>
        </tr>
        <tr>
          <td>repeat</td>
          <td>Anzahl der Kommando (und sound) Wiederholungen</td>
          <td>1</td>
        </tr>
        <tr>
          <td>parameter</td>
          <td>Falls angegeben wird dieser Parameter dem Kommando übergeben.
            Falls weder sound noch category gesetzt sind, wird der Name als der
            Pfad zu einer Sound-Datei interpretiert.</td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <p><br>
    </p>
    <h4>Parameter für AlarmHandler</h4>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>infoSound</td>
          <td>X</td>
          <td>Name einer mp3 Datei für den Sound in der Kategorie info.<br>
            Kann aus einer Liste von eingebauten sounds und Dateien im
            user-Verzeichnis gewählt werden (über Download Seite hochladbar)</td>
          <td>waypointAlarm.mp3</td>
        </tr>
        <tr>
          <td>criticalSound</td>
          <td>X</td>
          <td>Name einer mp3 Datei für den Sound in der Kategorie critical.<br>
            Kann aus einer Liste von eingebauten sounds und Dateien im
            user-Verzeichnis gewählt werden (über Download Seite hochladbar)</td>
          <td>anchorAlarm.mp3</td>
        </tr>
        <tr>
          <td>defaultCommand</td>
          <td>X</td>
          <td>Kommando für Alarme die nicht explizit ein Komando definiert
            haben.<br>
            Dieses Kommando muss beim AVNCommandHandler konfiguriert werden.</td>
          <td>sound</td>
        </tr>
        <tr>
          <td>stopAlarmPin</td>
          <td>X</td>
          <td>Nur auf Raspberry Pi. Wenn gesetzt (board Nummerierung), schaltet
            ein Low an diesem Pin Alarme aus</td>
          <td>leer</td>
        </tr>
      </tbody>
    </table>
    <p><br>
    </p>
    <h3><a name="plugins" id="plugins"></a>AVNPluginHandler</h3>
    <p>Management von plugins. Kategorie 2 (einmalig, optional).<br>
      Der AVNPluginHandler verwaltet <a href="plugins.html">Plugins</a>, die in
      verschiedenen Verzeichnissen installiert werden können. Es gibt 3
      Verzeichnisse in denen Plugins gesucht werden:</p>
    <ul>
      <li>builtin: /usr/lib/avnav/server/plugins</li>
      <li>system: /user/lib/avnav/plugins</li>
      <li>user: /home/pi/avnav/data/plugins</li>
    </ul>
    <p>Neben den Parametern für den Plugin Handler selbst können die jeweiligen
      Plugins Parameter erwarten. Der Name für das Plugin ergibt sich dabei aus
      der Kategorie und dem plugin Verzeichnis. Beispiel:</p>
    <div class="code">&lt;AVNPluginHandler&gt;
        &lt;builtin-signalk enabled="true"/&gt;
	&lt;builtin-canboat enabled="true" allowKeyOverwrite="true" autoSendRMC="30" sourceName="canboatgen"/&gt;
&lt;/AVNPluginHandler&gt;</div>
    <h4>Parameter für AVNPluginHandler</h4>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>builtinDir</td>
          <td>Verzeichnis für eingebaute Plugins, nicht änderbar</td>
          <td>/usr/lib/avnav/server/plugins</td>
        </tr>
        <tr>
          <td>systemDir</td>
          <td>Verzeichnis für Plugins, die als separate Pakete installiert
            werden</td>
          <td>/usr/lib/avnav/plugins</td>
        </tr>
        <tr>
          <td>userDir</td>
          <td>Verzeichnis für Nutzer Plugins</td>
          <td>/home/pi/avnav/data/plugins</td>
        </tr>
      </tbody>
    </table>
    <h4>Parameter für <a href="CanboatAndSignalk.html">builtin-canboat</a></h4>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td>Nur wenn auf true, ist das Plugin aktiv</td>
          <td>false</td>
        </tr>
        <tr>
          <td>allowKeyOverride</td>
          <td>X</td>
          <td>Muss gesetzt werden, wenn Datum und Zeit von canboat gelesen
            werden sollen</td>
          <td>false</td>
        </tr>
        <tr>
          <td>port</td>
          <td>X</td>
          <td>canboat json Port</td>
          <td>2598</td>
        </tr>
        <tr>
          <td>host</td>
          <td>X</td>
          <td>Host für den n2kd</td>
          <td>localhost</td>
        </tr>
        <tr>
          <td>autoSendRMC</td>
          <td>X</td>
          <td>falls für diese Zeit in Sekunden kein RMC im NMEA-Datenstrom
            gesehen wird, aber gültige Positionsdaten + Zeit von canboat
            vorhanden sind: sende RMC (ist wichtig für Datum/Zeit auf NMEA0183)</td>
          <td>0 (aus)</td>
        </tr>
        <tr>
          <td>sourceName</td>
          <td>X</td>
          <td>Kanalname, der für RMC genutzt wird</td>
          <td>plugin-Name</td>
        </tr>
        <tr>
          <td>timeInterval</td>
          <td>X</td>
          <td>minimale Zeit zwischen 2 NMEA2000 Zeit Werten, bevor diese
            gespeichert werden (Sekunden)</td>
          <td>0.5</td>
        </tr>
        <tr>
          <td>timePGNs</td>
          <td>X</td>
          <td>PGNs, die für das Setzen der Zeit genutzt werden</td>
          <td>126992,129029</td>
        </tr>
      </tbody>
    </table>
    <h3>AVNChartHandler</h3>
    <p>Verwaltung der Karten. Kategorie 2 (einmal, muss nicht enthalten sein)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>period</td>
          <td>Zeitintervall zwischen 2 Lesevorgängen für das Kartenverzeichnis
            (Sekunden)</td>
          <td>30</td>
        </tr>
        <tr>
          <td>upzoom</td>
          <td>Anzahl von zoom Stufen über der höchsten vorhandenen Stufe</td>
          <td>2</td>
        </tr>
      </tbody>
    </table>
    <h3>AVNUserHandler</h3>
    <p>Verwaltung der Nutzer-Dateien. Kategorie 2 (einmal, muss nicht enthalten
      sein)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>interval</td>
          <td>Zeitintervall zwischen 2 Lesevorgängen für das Verzeichnis
            (Sekunden)</td>
          <td>5</td>
        </tr>
      </tbody>
    </table>
    <h3>AVNImagesHandler</h3>
    <p>Verwaltung der Nutzer-Images. Kategorie 2 (einmal, muss nicht enthalten
      sein)</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>interval</td>
          <td>Zeitintervall zwischen 2 Lesevorgängen für das Verzeichnis
            (Sekunden)</td>
          <td>5</td>
        </tr>
      </tbody>
    </table>
    <h3>AVNUserAppHandler</h3>
    <p>Verwaltung der konfigurierten <a href="../userdoc/addonconfigpage.html">User
        Apps</a>. Kategorie 2 (einmal, muss nicht enthalten sein)</p>
    <p>Dieser Handler ist etwas speziell. Initial sind hier keine
      Konfigurationen zu finden, über die WebApp können aber Konfigurationen
      angelegt werden. Eine händische Änderung ist nicht empfohlen.</p>
    <h3>AVNAvahiHandler</h3>
    <p>Steuert die Registrierung von AvNav bei Avahi(MDNS/Bonjour). </p>
    <p> </p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Name</td>
          <td>online</td>
          <td>Beschreibung</td>
          <td>default/template</td>
        </tr>
        <tr>
          <td>serviceName</td>
          <td>X</td>
          <td>Der Name der in Tools sichtbar wird.<br>
            Das ist nicht der Host Name, den man z.B. in avnav.local benutzt!</td>
          <td>avnav</td>
        </tr>
        <tr>
          <td>maxRetries</td>
          <td>X</td>
          <td>Wie viele Wiederholungen macht AvNav, wenn der gewählte Name
            bereits vergeben ist. Wiederholungen hängen ein "-nn" suffix an den
            Namen an.</td>
          <td>20</td>
        </tr>
        <tr>
          <td>timout</td>
          <td>X</td>
          <td>Timeout bei der Verbindung mit dem&nbsp; avahi daemon (s)</td>
          <td>10</td>
        </tr>
        <tr>
          <td>enabled</td>
          <td>X</td>
          <td><br>
          </td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>AVNSignalKHandler</h3>
    <p>New with 20220421.<br>
      For a description refer to the <a href="CanboatAndSignalk.html#configuration">SignalK
        Documentation</a>.</p>
    <p></p>
    <p> </p>
  </body>
</html>
