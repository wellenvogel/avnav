<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>AvNav Quickstart</title>
    <link href="styles.css" rel="stylesheet" type="text/css">
  </head>
  <body data-order="200">
    <h1>AvNav Quickstart</h1>
    <p>Ein Hinweis vorweg:</p>
    <p><i><b>Ich kann keine Garantie für die Funktion der App übernehmen,
          insbesondere die Nutzung zu Navigationszwecken geschieht auf eigenes
          Risiko. In jedem Falle empfehle ich einen intensiven Test der
          Genauigkeit der Darstellung und des verwendeten Kartenmaterials.</b></i></p>
    <div class="toc"></div>
    <p class="western">Eine ausführliche Beschreibung der Konzepte findet man im
      Kapitel <a href="beschreibung.html">Einführung</a>.</p>
    <h2 class="western">Generelles</h2>
    <p>AvNav ist primär ausgelegt für die Bedienung auf Touch-Geräten (auch mit
      relativ kleinen Bildschirmen). Es wurde versucht, die Bedienelemente und
      Anzeigen so zu gestalten, dass sie auch unter Bord-Bedingungen gut nutzbar
      sind.</p>
    <p>Eine Bedienung über Maus (und Tastatur) ist natürlich ebenfalls möglich.</p>
    <h2 class="western">Installation und Inbetriebnahme</h2>
    <p>AvNav gibt es in 2 Varianten:</p>
    <ol>
      <li>Client-Server Variante.<br>
        Dabei wird der Server auf einem Linux- oder Windows-System installiert
        (z.B. einem Raspberry Pi). Als "Client" für die Bedienung dient ein
        beliebiger Browser z.B. auf einem Tablet.</li>
      <li>Android App<br>
        Hier ist die gesamte Funktionalität in einer App gebündelt. Auch hier
        können weitere Geräte per Browser zusätzlich zugreifen.</li>
    </ol>
    <h3>Client Server Variante</h3>
    <p>AvNav steht als <a href="install.html#Packages">Paket für verschiedene
        Linux-Distributionen</a> (Debian Pakete, Rpm) sowie als <a href="install.html#Windows">Installer
        für Windows</a> zur Verfügung.<br>
      Die Debian-Pakete sind in einem <a href="https://github.com/free-x/avnav/wiki">Repository</a>
      verfügbar und können außerdem von der <a href="release.html">Release-Seite</a>
      heruntergeladen werden.<br>
      Außerdem pflegen wir <a href="install.html#Headless">Images für den
        Raspberry Pi</a>. Eine ausführliche Beschreibung findet sich im Kapitel
      <a href="install.html">Installation</a>.</p>
    <p>Nach der Installation und Start der App kann man sich mit dem Browser zu
      AvNav verbinden. Dadurch startet die <a href="userdoc/index.html">WebApp</a>.<br>
      Wenn man unsere Images nutzt, erzeugt der Raspberry ein WLAN (Name und
      Passwort können angepasst werden). Für Details, wie man sich nach der
      Installation mit dem Server verbindet, siehe die <a href="install.html#connecting">Image
        Beschreibung</a>. <br>
      Wenn man über einen anderen Weg mit dem AvNav-Server verbunden ist, kann
      man http://avnav.local benutzen (oder die IP Adresse des Servers).<br>
      Für IOS- und Android-Geräte ist es empfehlenswert, einen <a href="https://de.wikipedia.org/wiki/Bonjour_%28Apple%29">Bonjour</a>
      Browser zu nutzen. Dieser kann AvNav im lokalen Netz finden, so dass man
      ohne Adresseingabe sofort den Browser starten kann.</p>
    <ul>
      <li>IOS: <a href="https://itunes.apple.com/us/app/bonjour-search-for-http-web-in-wi-fi/id1097517829?mt=8"><img
            class="inlineimage" src="https://is4-ssl.mzstatic.com/image/thumb/Purple69/v4/ba/f9/c2/baf9c2dd-656d-c303-fae1-a07310825e72/pr_source.png/246x0w.png"></a></li>
      <li>Android: <a href="https://play.google.com/store/apps/details?id=de.wellenvogel.bonjourbrowser"><img
            src="https://lh3.googleusercontent.com/sOV0YDqS3VNhTd4PfLB4PKj89_bbP8MtFHCVydjSp1-zLMyc8LB_z_HFVsZQEFgINQ=s180-rw"
            alt="" class="inlineimage"></a> </li>
    </ul>
    <h3>Android App</h3>
    <p>Die <a href="android/android.html">App</a> steht im Play Store zur
      Verfügung <a href="https://play.google.com/store/apps/details?id=de.wellenvogel.avnav.main"><img
          src="sailboat512r.png" alt="" class="inlineimage"> </a></p>
    <h2>Konfiguration</h2>
    <p>Nach der Installation oder der Nutzung eines Images wird AvNav in der
      Regel ohne weitere Konfiguration starten. An den USB-Anschlüsse werden
      serielle Schnittstellen mit ihren Baudraten automatisch ermittelt. Je nach
      gewählter Installation ist meist ein Empfänger für UDP-Daten auf Port
      34667 aktiv.</p>
    <p>Für weitergehende Anforderungen kann eine detaillierte Konfiguration des
      Servers über die <a href="userdoc/statuspage.html">Server/Status Seite</a>
      vorgenommen werden. Eine Anpassung des Aussehens kann über die <a href="userdoc/settingspage.html">Einstellungen</a>,
      über <a href="hints/layouts.html">Anpassungen des Layouts</a> und über <a
        href="hints/userjs.html">nutzerdefinierten Code</a>/<a href="hints/usercss.html">CSS</a>
      sowie <a href="hints/plugins.html">Plugins</a> vorgenommen werden.</p>
    <h2>NMEA-Daten</h2>
    <p><img class="fimage" src="avnav_schnittstellen.png" name="Datenim- und Export"
        border="0" width="600"> </p>
    <h3>Client Server Variante</h3>
    <p>AvNav verarbeitet NMEA0183-Daten, die über angeschlossene USB-Geräte,
      serielle Schnittstellen, Bluetooth-Geräte,&nbsp; TCP (Client und Server)
      oder UDP empfangen werden können. Eine Multiplexer-Funktion erlaubt es,
      die Daten von allen angeschlossenen Schnittstellen zu empfangen und <a href="hints/configfile.html">konfigurierbar</a>
      an beliebige Schnittstellen wieder auszusenden.</p>
    <p>Einen Teil der Daten dekodiert AvNav (Positionsdaten, AIS,...) und nutzt
      sie für die eigenen Anzeige-Funktionen.<br>
      <a name="decoding"></a>Die folgenden NMEA-Datensätze werden von AvNav
      dekodiert:</p>
    <ul>
      <li>!AIVDM</li>
      <li>$xxGGA</li>
      <li>$xxGSV</li>
      <li>$xxGLL</li>
      <li>$xxVTG</li>
      <li>$xxRMC (mag. variation seit 20240520)</li>
      <li>$xxMWV (ab 20220225 auch waterSpeed)</li>
      <li>$xxDPT</li>
      <li>$xxDBT</li>
      <li>$xxXDR (seit 20210114)</li>
      <li>$xxHDG (seit 210106xx, mag. variation seit 20240520)</li>
      <li>$xxHDT (seit 20210619)</li>
      <li>$xxHDM (seit 20210619) </li>
      <li>$xxVHW partiell (seit 20210619)</li>
      <li>$xxVWR (seit 20220225)</li>
      <li>$xxMTW (seit 20220225)</li>
      <li>$xxZDA (seit 20220421)</li>
      <li>$xxVDR (seit 20240520)</li>
    </ul>
    <p>Je nach <a href="hints/configfile.html">Konfiguration</a> kann AvNav
      auch NMEA-Daten erzeugen:</p>
    <ul>
      <li>$GPRMB</li>
      <li>$GPAPB</li>
      <li>$AVXDR</li>
      <li>$AVMDA</li>
      <li>$AVMTA</li>
    </ul>
    <p>In Zusammenarbeit mit <a href="hints/CanboatAndSignalk.html">Canboat and
        SignalK</a> können auch <a href="hints/CanboatAndSignalk.html">NMEA2000-</a>
      Daten empfangen und genutzt werden. Außerdem können alle Daten für das
      eigene Schiff, die in SignalK verfügbar sind, in AvNav angezeigt werden.<br>
      Ab Version 20220421 kann AvNav auch direkt seine Navigationsdaten von
      SignalK erhalten.</p>
    <h3>Android</h3>
    <p>Unter <a href="android/android.html">Android</a> kann das interne GPS
      genutzt werden. Außerdem kann eine TCP- oder Bluetooth-Verbindung zum
      Empfang von GPS- oder AIS-Daten genutzt werden. Auf Geräten mit
      USB-Host-Funktion kann auch ein Seriell-USB-Adapter angeschlossen werden.</p>
    <p>Es werden die folgenden NMEA-Daten dekodiert:</p>
    <ul>
      <li>!AIVDM</li>
      <li>$xxGGA</li>
      <li>$xxGSV</li>
      <li>$xxGLL</li>
      <li>$xxGSA</li>
      <li>$xxRMC (mag. variation seit 20240520)</li>
      <li>$xxMWV (ab 20220225 auch waterSpeed)</li>
      <li>$xxDBT</li>
      <li>$xxXDR (seit 20210114)</li>
      <li>$xxHDG (seit 210106xx, mag. variation seit 20240520)</li>
      <li>$xxHDT (seit 20210619)</li>
      <li>$xxHDM (seit 20210619) <br>
      </li>
      <li>$xxVHW partiell (seit 20210619)</li>
      <li>$xxVWR (seit 20220225)</li>
      <li>$xxMTW (seit 20220225)</li>
      <li>$xxVDR (seit 20240520)</li>
    </ul>
    <p>Bei enstprechender Konfiguration kann AvNav $GPRMC und $GPRMB-Sätze (ab
      20220225 auch $GPAPB) erzeugen und aussenden.</p>
    <p></p>
    <h2>Karten</h2>
    <p>AvNav verarbeitet grundsätzlich Karten im <a href="charts.html#Intro">Rasterformat</a>.
      Diese können aus verschiedenen Quellen im Netz heruntergeladen werden
      (z.B. <a href="https://wiki.openstreetmap.org/wiki/DE:Locus#https://wiki.openstreetmap.org/wiki/DE:Locus#Offline-Karten">OpenSeaMap</a>
      or <a href="https://tileservice.charts.noaa.gov/tileset.html#50000_1-locator">NOAA</a>)
      oder z.B. mit dem <a href="https://mobac.sourceforge.io/">MobileAtlasCreator</a>
      oder <a href="https://wiki.openstreetmap.org/wiki/SAS_Planet">SASPlanet</a>
      aus Quellen im Netz erstellt werden.</p>
    <p>Unmittelbar verarbeiten kann AvNav Karten im <a href="charts.html#chartformats">"gemf"-
        und "mbtiles"-Format</a>. Daneben können Karten z.B. im BSB-Format (kap)
      in das gemf Format <a href="charts.html#Convert">konvertiert</a> werden,
      entweder direkt auf dem Raspberry - oder besser vorher auf einem
      Desktop-System.</p>
    <p>Außerdem kann AvNav <a href="hints/ocharts.html">o-charts</a>- Karten
      verarbeiten, unter Android <a href="hints/ochartsng.html">mit der
        avocharts app (ochartsng)</a>. Der O-Charts-Shop bietet Karten für
      Open-Source-Software zu sehr günstigen Preisen an.</p>
    <p>Mit dem <a href="hints/ochartsng.html">ochartsng</a> plugin kann AvNav
      auch freie S57 Karten anzeigen (nach Konvertierung).</p>
    <p>Karten müssen in AvNav installiert werden, bevor sie genutzt werden
      können. Das kann auf der <a href="userdoc/downloadpage.html">Files/Download
        Seite</a>, erfolgen - Sektion charts <img src="viewerimages/icons-new/map2.svg"
        alt="" class="inlineimage">. O-charts Karten müssen über das <a href="hints/ocharts.html">o-charts
        plugin</a> / <a href="hints/ochartsng.html">ochartsng plugin</a>
      hochgeladen werden.</p>
    <p></p>
    <p>Mit dem <a href="https://github.com/wellenvogel/avnav-mapproxy-plugin">mapproxy-plugin</a>
      kann AvNav darüber hinaus verschiedene Online-Karten einbinden. Für die
      Offline-Nutzung einzelner Bereiche von Online-Karten kann das Plugin
      ebenfalls genutzt werden.</p>
    <p>Weitere Details herzu finden sich im Kapitel <a href="charts.html">Karten</a>.</p>
    <h2>Anzeigen</h2>
    <p>Auf der <a href="userdoc/navpage.html">Seite "Navigation"</a> werden
      dargestellt: Die aktuelle Boots-Position, der Kurs, die Route zum nächsten
      Wegepunkt, die aktuelle Route, AIS Ziele und deren Kurse,
      Navigationskreise und definierte <a href="hints/overlays.html">Overlays</a>.</p>
    <p>Weitere Navigationsdaten können dargestellt werden auf der <a href="userdoc/navpage.html">Seite
        "Navigation"</a>, im <a href="userdoc/editroutepage.html">Routen-Editor</a>
      und auf bis zu 5 <a href="userdoc/dashboardpage.html">Dashboard-Seiten,
        die selbst konfiguriert werden können.</a> Das schließt auch die in <a
        href="hints/CanboatAndSignalk.html">SignalK</a>vorhandenen Werte ein.</p>
    <p>Es können einfache Zahlenwerte, <a href="hints/layouts.html#gauges">analoge
        Anzeigen</a> oder auch Grafik-Anzeigen realisiert werden.</p>
    <p>Die Darstellung der Navigationsdaten kann in weiten Grenzen an eigene
      Bedürfnisse angepasst werden. Dazu dient der <a href="hints/layouts.html">Layout-Editor</a>
      Eigene Anzeige-Layouts können mit ein wenig <a href="hints/userjs.html">JavaScript-Code</a>
      und mit <a href="hints/usercss.html">CSS</a> erstellt werden.</p>
    <p>Diese Layouts beinhalten auch eine Anpassung an unterschiedliche
      Bildschirm-Ausrichtungen und -auflösungen.</p>
    <h2><a name="routes"></a>Routen</h2>
    <p>In AvNav können sehr einfach Routen erstellt und bearbeitet werden. Das
      erfolgt in der Kartenansicht im <a href="userdoc/editroutepage.html">Routen-Editor</a>.
      Im Normalfall verschiebt man die Karte so, dass der Mittelpunkt auf dem
      gewünschten Wegepunkt liegt, und fügt diesen dann mit einem Klick der
      Route hinzu. Punkte der Route können verschoben, gelöscht und bearbeitet
      werden.</p>
    <p>Wegepunkte oder andere Routen, die als <a href="hints/overlays.html">Overlays</a>
      angezeigt werden, können im Routen-Editor der aktuellen Route hinzugefügt
      werden.</p>
    <p>Eine Route kann invertiert werden, alle Wegepunkte können auch gelöscht
      werden. Routen werden in AvNav als "gpx"-Dateien gespeichert. Sie können
      über die <a href="userdoc/downloadpage.html">Files/Download-Seite</a>
      importiert und exportiert werden. Aus dem Routen-Editor kann die
      Navigation direkt gestartet werden. Innerhalb einer Route erfolgt eine
      Alarmierung, wenn der nächste Wegepunkt erreicht wird bzw. sobald man sich
      innerhalb des "approach" genannten Umkreises befindet. Es erfolgt ein
      automatisches Weiterschalten zum nächsten Wegpunkt.</p>
    <p>Ab Version 20220819 kann AvNav zwei verschiedene Routing Modi nutzen<a name="RoutingMode"></a>:</p>
    <h3><a href="https://en.wikipedia.org/wiki/Great_circle">great circle</a></h3>
    Hier wird eine Route so berechnet das man den kürzesten Weg zwischen Start
    und Ziel hat. Der Nachteil daran ist, das sich der Kurs im Verlauf der Route
    permanent ändert. Eine solche Route ist in der Kartendarstellung keine
    Strecke sondern eine Kurve.<br>
    In älteren Versionen hat AvNav immer great circle Routen berechnet, diese
    aber (fälschlich) als Strecken dargestellt.<br>
    Für kürzere Distanzen (&lt; 100nm) spielt das aber praktisch keine Rolle.
    <h3><a href="https://en.wikipedia.org/wiki/Rhumb_line">rhumb line</a></h3>
    Hier wird die Route so berechnet, das ein konstanter Kurs gesteuert werden
    kann. Die Kartendarstellung ist eine Strecke.
    <p>Die Umschaltung erfolgt im Router auf der&nbsp;<img src="viewerimages/icons-new/status.svg"
        alt="" class="inlineimage"> <a href="userdoc/settingspage.html">Server/Status
        Seite</a>. Für das&nbsp;<img src="viewerimages/icons-new/straighten.svg"
        alt="" class="inlineimage"> Mess-Tool kann in den Einstellungen der Web
      App (unter Navigation/Measure Display RhumbLine) der Modus separat
      eingestellt werden. Damit können leicht die beiden Wege verglichen werden.</p>
    <h3><a name="nextwp"></a>Wegepunkt Weiterschaltung</h3>
    <p>Für die automatische Weiterschaltung zum nächsten Wegepunkt in einer
      Route müssen immer zwei Bedingungen erfüllt sein:</p>
    <ol>
      <li>Das Boot muss sich im Annäherungsbereich des Wegepunktes befinden
        (kann man in den Einstellungen der WebApp vor dem Starten einer Route
        definieren). Das wird ersichtlich durch einen ausgelösten
        Wegepunkt-Alarm und eine rote Darstellung im Route-Widget.</li>
      <li>Je nach eingestelltem Mode (Router auf der&nbsp;<img src="viewerimages/icons-new/status.svg"
          alt="" class="inlineimage"> <a href="userdoc/settingspage.html">Server/Status
          Seite</a>: nextWpMode) - neu ab 20220819<br>
        "late" (der default und in älteren Versionen): Die Entfernung zum
        aktuellen Wegepunkt nimmt nicht mehr ab aber die Entfernung zum nächsten
        Wegepunkt nimmt ab<br>
        "90": Der Wegepunkt liegt "querab" (genauer: Das Boot hat eine Linie +/-
        90° zum originalen Wegepunktkurs überquert)<br>
        "early": Die Weiterschaltung erfolgt eine (einstellbare) Zeit nach dem
        Wegepunkt-Alarm ohne weitere Bedingungen</li>
    </ol>
    Es ist wichtig zu beachten, das die Weiterschaltung nur erfolgt, wenn beide
    Kriterien erfüllt sind. Falls eine manuelle Weiterschaltung gewünscht ist,
    kann man jederzeit durch Klick auf die Widgets links unten die
    Wegepunkt-Buttons anzeigen un den <img src="viewerimages/icons-new/nextwp.svg"
      alt="" class="inlineimage">Button nutzen.<br>
    <h2><a name="tracks"></a>Tracks</h2>
    <p>AvNav zeichnet beständig den aktuellen Track auf und zeigt ihn auf der
      Karte. Dabei wird versucht, die Zahl der Trackpunkte zu begrenzen, indem
      nur bei größeren Änderungen oder nach einer bestimmten Zeit erneut ein
      Trackpunkt geschrieben wird (Siehe <a href="hints/configfile.html?lang=en#h3:AVNTrackWriter">Konfiguration
        ANVTrackWriter </a>). Die Tracks werden in regelmäßigen Abständen als
      "gpx"-Datei gespeichert und können auf der <a href="userdoc/downloadpage.html#tracks">Files/Download-Seite</a>
      exportiert und importiert werden (dort ist auch eine Anzeige ihrer Daten -
      also Strecke, Zeit, usw. möglich). Pro Tag wird eine separate "gpx"-Datei
      erzeugt. Außerdem können vorhandene Tracks auf der Karte als <a href="hints/overlays.html">Overlay</a>
      dargestellt werden.</p>
    <p>Vorhandene <a href="hints/TracksToRoutes.html">Tracks können in Routen</a>
      umgewandelt werden. Dabei wird über einen Reduktionsalgorithmus die Zahl
      der Wegepunkte automatisch reduziert.</p>
    <h2><a name="AIS"></a>AIS</h2>
    <p>In der Kartendarstellung werden AIS-Ziele in einem bestimmten Umkreis
      (default: 20nm) mit ihren Positionen und ihren Kursen dargestellt.
      Außerdem erfolgt eine Berechnung des nächsten Zieles und eine Warnung,
      falls eine einstellbare minimale Begegnungsentfernung unterschritten wird
      (CPA).</p>
    <p>Für Details siehe die Beschreibung auf der <a href="userdoc/navpage.html#ais">Navigationsseite</a>.</p>
    <h2>Alarme</h2>
    <p>AvNav kann Alarme erzeugen für:</p>
    <ul>
      <li>eine Ankerwache<br>
        Sie kann auf den <a href="userdoc/dashboardpage.html#anchorwatch">Dashboard-Seiten</a>
        aktiviert werden. Abhängig vom Layout werden die Anzeigen angepasst. Bei
        Verlassen des vorgegebenen Bereiches (oder bei Ausfall des GPS-Signals)
        erfolgt eine Alarmierung</li>
      <li>bei Erreichen des nächsten Wegepunktes</li>
      <li>"Mensch über Bord" (MOB)<br>
        Für das Auslösen eines MOB-Alarms ist in allen Ansichten von AvNav eine
        separate<img src="viewerimages/icons-new/drowning.svg" alt="" class="inlineimage">
        <a href="userdoc/mainpage.html#mob">MOB-Taste</a> vorhanden. Durch diese
        wird die aktuelle Position zum neuen Zielpunkt, alle anderen Routings
        werden beendet. Außerdem wird der Alarm ausgelöst.</li>
    </ul>
    <p>Alarme werden in AvNav auf dem Server erzeugt und verwaltet. Insbesondere
      z.B. für die Ankerwache können alle Anzeige-Geräte abgeschaltet werden,
      aber die Überwachung läuft weiter.</p>
    <p>Es kann bei den Alarmen eine akustische Signalisierung sowohl auf dem
      Server, als auch in der Client-Anzeige erfolgen. Auf dem Server können
      auch weitere Aktionen ausgelöst werden (siehe <a href="https://github.com/wellenvogel/avnav/tree/master/hardware/simple-pi">Beispiel</a>).
      Die Konfiguration erfolgt im&nbsp; <a href="hints/configfile.html#AVNAlarmHandler">configfile
        - AVNAlarmHandler</a>.</p>
    <h2>Nachtmodus</h2>
    <p>AvNav kann auf der <a href="userdoc/mainpage.html">Hauptseite</a> in
      einen Nachtmodus <img src="viewerimages/icons-new/night.svg" alt="" class="inlineimage">
      geschaltet werden. Dann sind alle Anzeigen entsprechend angepasst.</p>
    <h2>Fernsteuerung</h2>
    <p>AvNav kann die Anzeige Funktionen auf einem Gerät von einem anderen Gerät
      oder vom Server aus steuern. Für Details siehe die <a href="hints/RemoteControl.html">Beschreibung</a>
      dazu.</p>
    <h2>Anpassung</h2>
    <p>AvNav kann in unterschiedlicher Weise an eigene Bedürfnisse angepasst
      werden. Da die gesamte Darstellung im Browser abläuft, kann man das
      Aussehen mit <a href="hints/usercss.html">CSS</a> anpassen.</p>
    <p>Die Konfiguration des Servers arfolgt über die Datei <a href="hints/configfile.html">avnav_server.xml</a>.
      Eine Änderung sollte im Normalfall jedoch nicht in der Datei direkt
      erfolgen, sondern über die Bearbeitungsmöglichkeiten auf der <a href="userdoc/statuspage.html">Server/Status-Seite</a>.</p>
    <p>Neben der bereits beschriebenen Anpassung der Layouts im <a href="hints/layouts.html">Layout-Editor</a>
      können ohne größeren Aufwand eigene Anzeigen mit ein wenig <a href="hints/userjs.html">Java
        Script</a> Code eingebunden werden.</p>
    <p>Es ist auch möglich, weitere externe oder AvNav-interne Webseiten als "<a
        href="userdoc/addonconfigpage.html">User Apps</a>" einzubinden und
      anzuzeigen.</p>
    <p>Die zur Darstellung genutzten Symbole können über eine <a href="hints/usericons.html">Json-Datei
        </a>angepasst werden, ebenso die <a href="hints/keyboard.html">Tastaturkürzel
        für Aktionen</a>.</p>
    <p>Mit Python, JavaScript und CSS können <a href="hints/plugins.html">eigene
        Plugins</a> geschrieben werden, die die Funktionalität von AvNav
      erweitern.</p>
    <p><br>
    </p>
  </body>
</html>
